version: '3' #the version or standards used to write the docker-compose file

services:
   nginx:
      build: "nginx/"
      image: nginx
      restart: always
      container_name: nginx
      ports:
         - 443:443
      volumes:
         - wp-volume:/var/www/
      networks:
         - inception
      env_file:
         - .env
   mariadb:
      build: "mariadb/"
      image: mariadb
      restart: always
      container_name: mariadb
      volumes:
         - mariadb-volume:/var/lib/mysql
      networks:
         - inception
      env_file:
         - .env
   wordpress:
      build: "wordpress/"
      depends_on:
         - nginx
         - mariadb
         - redis
      image: wordpress
      restart: always
      container_name: wordpress
      volumes:
         - wp-volume:/var/www/
      networks:
         - inception
      env_file:
         - .env
   redis:
      build: "bonus/redis/"
      image: redis
      restart: always
      container_name: redis
      networks:
         - inception
   ftp:
      build: "bonus/ftp/"
      image: ftp
      restart: always
      container_name: ftp
      ports:
         - '21:21'
         - 10000:10000
      volumes:
         - wp-volume:/home/amouassi/
      networks:
         - inception
   adminer:
      build: "bonus/adminer/"
      image: adminer
      restart: always
      container_name: adminer
      ports:
         - '5001:5001'
      volumes:
         - wp-volume:/var/www
      depends_on:
         - nginx
         - mariadb
      networks:
         - inception
volumes:
   wp-volume:
      driver_opts:
         type: 'none'
         o: 'bind'
         device: '/home/amouassi/data/wp-volume'
   mariadb-volume:
      driver_opts:
         type: 'none'
         o: 'bind'
         device: '/home/amouassi/data/mariadb-volume'

networks:
   inception:
      name: inception
      driver: bridge
